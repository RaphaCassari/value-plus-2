(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{4969:function(a,e,t){"use strict";t("b99a")},b99a:function(a,e,t){},d9e0:function(a,e,t){"use strict";t.r(e);var s=function(){var a=this,e=a._self._c;return e("q-page",[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-h6"},[a._v("Mapa com Localização Atual e Parceiros")])]),e("q-card-section",[e("div",{staticClass:"map-container",attrs:{id:"map"}})]),e("q-card-section",[e("div",{staticClass:"text-h6"},[a._v("Parceiros Disponíveis")]),e("q-input",{staticClass:"q-my-md",attrs:{filled:"",placeholder:"Buscar Parceiros",debounce:"300"},scopedSlots:a._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:a.searchQuery,callback:function(e){a.searchQuery=e},expression:"searchQuery"}}),e("q-list",{attrs:{bordered:""}},a._l(a.filteredPartners,(function(t){return e("q-item",{key:t.name,attrs:{clickable:""},on:{click:function(e){return a.showPartnerDetails(t)}}},[e("q-item-section",[e("div",{staticClass:"q-flex q-items-center"},[e("q-icon",{staticClass:"q-mr-sm",attrs:{name:"place",color:"blue"}}),e("div",{staticClass:"text-h6"},[a._v(a._s(t.name))])],1),e("div",[a._v(a._s(t.address))]),e("div",[a._v(a._s(t.contact))]),e("div",[a._v("Distância: "+a._s(a.calculateDistance(t.lat,t.lng))+" km")])])],1)})),1)],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{label:"Atualizar Localização"},on:{click:a.getLocation}})],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:a.showPromoModal,callback:function(e){a.showPromoModal=e},expression:"showPromoModal"}},[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-h6"},[a._v("Promoção Especial")]),e("div",{staticClass:"q-mt-md",domProps:{innerHTML:a._s(a.promoMessage)}}),e("div",{staticClass:"q-mt-md"},[e("div",{staticClass:"text-subtitle1"},[a._v("Promoções com Cartões Selecionados:")]),e("ul",a._l(a.selectedPartner.promotions,(function(t){return e("li",{key:t.card},[e("strong",[a._v(a._s(t.card)+":")]),a._v(" "+a._s(t.details)+"\n            ")])})),0)])]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{label:"Fechar"},on:{click:function(e){a.showPromoModal=!1}}})],1)],1)],1),e("q-dialog",{attrs:{persistent:""},model:{value:a.showPartnerModal,callback:function(e){a.showPartnerModal=e},expression:"showPartnerModal"}},[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-h6"},[a._v(a._s(a.selectedPartner.name))]),e("div",[a._v("Endereço: "+a._s(a.selectedPartner.address))]),e("div",[a._v("Contato: "+a._s(a.selectedPartner.contact))]),e("div",[a._v("Horário de Funcionamento: "+a._s(a.selectedPartner.hours))]),e("div",{staticClass:"q-mt-md"},[e("div",{staticClass:"text-subtitle1"},[a._v("Promoções com Cartões Selecionados:")]),e("ul",a._l(a.selectedPartner.promotions,(function(t){return e("li",{key:t.card},[e("strong",[a._v(a._s(t.card)+":")]),a._v(" "+a._s(t.details)+"\n            ")])})),0)])]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{label:"Fechar"},on:{click:function(e){a.showPartnerModal=!1}}})],1)],1)],1)],1)},r=[],o=t("e11e"),i=t.n(o),n=(t("6cc5"),t("436b"),{data(){return{map:null,userMarker:null,error:null,searchQuery:"",partners:[{name:"Phibit Innovation",lat:-23.649122,lng:-46.711662,address:"Rua Ada Negri, 220",contact:"Telefone: (11) 1234-5678",hours:"Seg-Sex: 09:00 - 18:00",promotions:[{card:"C6 Bank",details:"15% de desconto na segunda unidade"},{card:"Nubank",details:"10% de cashback nas compras acima de R$ 100,00"}]},{name:"Fiap",lat:-23.574134505882352,lng:-46.623086158823526,address:"Av. Lins de Vasconcelos, 1222",contact:"Telefone: (11) 8765-4321",hours:"Seg-Sex: 08:00 - 20:00",promotions:[{card:"C6 Bank",details:"20% de desconto em todos os cursos de tecnologia"},{card:"Itaú",details:"5% de desconto em cursos de MBA"}]}],promotionDistance:.01,showPromoModal:!1,promoMessage:"",showPartnerModal:!1,selectedPartner:{}}},computed:{filteredPartners(){return this.partners.filter((a=>a.name.toLowerCase().includes(this.searchQuery.toLowerCase())||a.address.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{initMap(){this.map=i.a.map("map").setView([0,0],12),i.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18}).addTo(this.map),this.addPartnerMarkers()},getLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.setLocation,this.showError):this.error="Geolocalização não é suportada por este navegador."},setLocation(a){const e=a.coords.latitude,t=a.coords.longitude;this.userMarker&&this.map.removeLayer(this.userMarker),this.userMarker=i.a.marker([e,t]).addTo(this.map).bindPopup("Você está aqui").openPopup(),this.map.setView([e,t],12),this.partners.forEach((a=>{this.isNearLocation(e,t,a.lat,a.lng)&&(this.selectedPartner=a,this.promoMessage=`\n            <div>\n              <p>Você está perto de ${a.name}. Aproveite a promoção exclusiva!</p>\n              <p><strong>Usando seu cartão C6 Bank, você ganha mais 15% de desconto na segunda unidade.</strong></p>\n              <p>Visite-nos e mostre este modal para aproveitar a oferta!</p>\n            </div>\n          `,this.showPromoModal=!0)}))},isNearLocation(a,e,t,s){return Math.abs(a-t)<this.promotionDistance&&Math.abs(e-s)<this.promotionDistance},addPartnerMarkers(){this.partners.forEach((a=>{i.a.marker([a.lat,a.lng]).addTo(this.map).bindPopup(`${a.name}: ${a.address}`)}))},showError(a){switch(a.code){case a.PERMISSION_DENIED:this.error="Permissão de localização negada.";break;case a.POSITION_UNAVAILABLE:this.error="Localização indisponível.";break;case a.TIMEOUT:this.error="A requisição de localização expirou.";break;default:this.error="Erro desconhecido.";break}},showPartnerDetails(a){this.selectedPartner=a,this.showPartnerModal=!0},calculateDistance(a,e){if(!this.userMarker)return"-";const t=this.userMarker.getLatLng().lat,s=this.userMarker.getLatLng().lng,r=6371,o=(a-t)*Math.PI/180,i=(e-s)*Math.PI/180,n=Math.sin(o/2)*Math.sin(o/2)+Math.cos(t*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2),c=2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)),d=r*c;return d.toFixed(2)}},mounted(){this.initMap(),this.getLocation()}}),c=n,d=(t("4969"),t("2877")),l=t("9989"),h=t("f09f"),u=t("a370"),m=t("27f9"),p=t("0016"),v=t("1c1c"),g=t("66e5"),P=t("4074"),M=t("4b7e"),_=t("9c40"),k=t("24e8"),b=t("eebe"),q=t.n(b),f=Object(d["a"])(c,s,r,!1,null,"cdf36c30",null);e["default"]=f.exports;q()(f,"components",{QPage:l["a"],QCard:h["a"],QCardSection:u["a"],QInput:m["a"],QIcon:p["a"],QList:v["a"],QItem:g["a"],QItemSection:P["a"],QCardActions:M["a"],QBtn:_["a"],QDialog:k["a"]})}}]);